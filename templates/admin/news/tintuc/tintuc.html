<!-- DANH S√ÅCH TIN T·ª®C -->
<div class="mb-10">
  <!-- Header -->
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold text-green-700">üì∞ Danh s√°ch Tin T·ª©c</h2>
    <button
      onclick="openNewsModal()"
      class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 shadow"
    >
      ‚ûï Th√™m Tin T·ª©c
    </button>
  </div>

  <!-- B·∫£ng danh s√°ch -->
  <div class="overflow-x-auto rounded-lg shadow border border-gray-200 h-[65vh] overflow-y-auto">
    <table class="min-w-full text-sm text-gray-800">
      <!-- Ti√™u ƒë·ªÅ b·∫£ng -->
      <thead class="bg-green-100 text-gray-700 text-left sticky top-0 z-10">
        <tr>
          <th class="px-4 py-3 border text-center">#</th>
          <th class="px-4 py-3 border">Tin t·ª©c</th>
          <th class="px-4 py-3 border">N·ªôi dung</th>
          <th class="px-4 py-3 border">Lo·∫°i</th>
          <th class="px-4 py-3 border text-center">N·ªïi B·∫≠t</th>
          <th class="px-4 py-3 border">Th·∫ª Tag</th>
        
          <th class="px-4 py-3 border text-center">L∆∞·ª£t Xem</th>
          <th class="px-4 py-3 border text-center">H√†nh ƒê·ªông</th>
        </tr>
      </thead>

      <!-- D·ªØ li·ªáu tin t·ª©c -->
      <tbody>
        {% for news in news_list %}
        <tr class="hover:bg-gray-50">
          <td class="px-4 py-3 border text-center">{{ news.MA_TIN }}</td>

          <!-- Ti√™u ƒë·ªÅ + T√†i kho·∫£n + Ng√†y ƒëƒÉng -->
          <td class="px-4 py-3 border align-top">
            <div class="space-y-1">
              <!-- Ti√™u ƒë·ªÅ -->
              <div class="text-base font-semibold text-gray-800 leading-snug">
                {{ news.TIEU_DE }}
              </div>

              <!-- T√°c gi·∫£ -->
              <div class="text-xs text-gray-500 flex items-center space-x-1">
                <span>T√°c gi·∫£: </span>
                <span class="font-medium">{{ news.MA_TK.TEN_DANG_NHAP }}</span>
              </div>

              <!-- Ng√†y ƒëƒÉng -->
              <div class="text-xs text-gray-500 flex items-center space-x-1">
                <span>Ng√†y ƒëƒÉng: </span>
                <span>{{ news.NGAY_DANG|date:"d/m/Y" }}</span>
              </div>
            </div>
          </td>
           <!-- N·ªôi dung -->
          <td class="px-4 py-3 border text-sm text-gray-700">
            {{ news.NOI_DUNG_CHI_TIET|truncatechars:100 }}
          </td>
          <td class="px-4 py-3 border">{{ news.LOAI_TIN_TUC }}</td>

          <!-- N·ªïi b·∫≠t -->
          <td class="px-4 py-3 border text-center">
            {% if news.TIN_NOI_BAT %} ‚úÖ {% else %} ‚ùå {% endif %}
          </td>

          <!-- Th·∫ª tag -->
          <td class="px-4 py-3 border">
            {% for tag in news.MA_TAG.all %}
              <span class="bg-green-200 text-green-800 text-xs font-semibold mr-1 mb-1 px-2.5 py-0.5 rounded inline-block">
                {{ tag.TEN_TAG }}
              </span>
            {% empty %}
              <span class="text-gray-400 italic">Kh√¥ng c√≥</span>
            {% endfor %}
          </td>

         

          <!-- L∆∞·ª£t xem -->
          <td class="px-4 py-3 border text-center">{{ news.SO_LUOT_XEM }}</td>

          <!-- H√†nh ƒë·ªông -->
          <td class="px-4 py-3 border text-center">
            <div class="flex flex-col items-center space-y-2">
              <!-- N√∫t s·ª≠a -->
              <button
                class="bg-yellow-400 text-white px-3 py-1 rounded hover:bg-yellow-500 text-xs w-20"
                onclick="openNewsModal({
                  ma_tk: '{{ news.MA_TK.MA_TK }}',
                  ma_tin: '{{ news.MA_TIN }}',
                  tieu_de: '{{ news.TIEU_DE|escapejs }}',
                  ngay_dang: '{{ news.NGAY_DANG|date:'Y-m-d' }}',
                  noi_dung: `{{ news.NOI_DUNG_CHI_TIET|escapejs }}`,
                  loai: '{{ news.LOAI_TIN_TUC }}',
                  tin_noi_bat: {{ news.TIN_NOI_BAT|yesno:'true,false' }},
                  url_hinh: '{{ news.URL_HINH }}',
                  ma_tag: [{% for tag in news.MA_TAG.all %}{ pk: {{ tag.pk }}, ten_tag: '{{ tag.TEN_TAG|escapejs }}' }{% if not forloop.last %}, {% endif %}{% endfor %}]
                })"
              >
                ‚úèÔ∏è S·ª≠a
              </button>

              <!-- N√∫t x√≥a -->
              <form
                method="POST"
                action="{% url 'admin_news:xoa_news' news.MA_TIN %}"
                onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a tin t·ª©c n√†y?');"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 text-xs w-20"
                >
                  üóëÔ∏è X√≥a
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center py-3 italic text-gray-500">
            Kh√¥ng c√≥ tin t·ª©c n√†o ƒë∆∞·ª£c t√¨m th·∫•y.
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Modal th√™m/s·ª≠a tin t·ª©c -->
{% include "admin/news/tintuc/themsuatintuc.html" %}
