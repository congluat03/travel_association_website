{% extends "index/index_layout.html" %}
{% load static %}

{% block title %}Danh s√°ch tour du l·ªãch{% endblock %}

{% block content %}
<section class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <div class="text-center mb-12">
        <h1 class="text-4xl font-extrabold text-emerald-700 tracking-tight">
          üß≥ Tour Du L·ªãch
        </h1>
        <p class="mt-2 text-gray-600">
          C√πng kh√°m ph√° nh·ªØng h√†nh tr√¨nh du l·ªãch h·∫•p d·∫´n, ƒë·ªôc ƒë√°o v√† ƒë·∫ßy tr·∫£i nghi·ªám tr√™n kh·∫Øp m·ªçi mi·ªÅn ƒë·∫•t n∆∞·ªõc.
        </p>
      </div>
      
    <form method="GET" action="">
        <div class="flex gap-6 mt-6">
            <!-- Sidebar b·ªô l·ªçc -->
            <div class="w-1/5 bg-white rounded-xl p-4 shadow border border-gray-100 space-y-4 h-fit">
                <h2 class="text-lg font-semibold text-green-700 mb-2">üîç B·ªô l·ªçc</h2>
                <input type="text" name="timkiem" placeholder="T√¨m tour..." value="{{ timkiem_chon }}" class="border p-2 rounded-md w-full">

                <!-- T·ªânh -->
                <select name="tinh" class="w-full px-3 py-2 border rounded-md">
                    <option value="">üìç Ch·ªçn t·ªânh</option>
                    {% for tinh in tinhs %}
                        <option value="{{ tinh }}" {% if tinh == tinh_chon %}selected{% endif %}>{{ tinh }}</option>
                    {% endfor %}
                </select>

                <!-- Th·ªùi gian -->
                <select name="thoigian" class="w-full px-3 py-2 border rounded-md">
                    <option value="">‚è±Ô∏è Ch·ªçn th·ªùi gian</option>
                    <option value="1" {% if thoigian_chon == '1' %}selected{% endif %}>1 ng√†y</option>
                    <option value="2-3" {% if thoigian_chon == '2-3' %}selected{% endif %}>2-3 ng√†y</option>
                    <option value="3+" {% if thoigian_chon == '3+' %}selected{% endif %}>3+ ng√†y</option>
                </select>

                <!-- Gi√° -->
                <select name="gia" class="w-full px-3 py-2 border rounded-md">
                    <option value="">üí∞ Ch·ªçn gi√°</option>
                    <option value="duoi1" {% if giatour_chon == 'duoi1' %}selected{% endif %}>D∆∞·ªõi 1 tri·ªáu</option>
                    <option value="1-3" {% if giatour_chon == '1-3' %}selected{% endif %}>1-3 tri·ªáu</option>
                    <option value="tren3" {% if giatour_chon == 'tren3' %}selected{% endif %}>Tr√™n 3 tri·ªáu</option>
                </select>

                <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-md text-sm transition">T√¨m ki·∫øm</button>
            </div>

            <!-- Danh s√°ch tour hi·ªÉn th·ªã theo chi·ªÅu d·ªçc -->
            <div class="w-4/5">
                <div class="grid grid-cols-1 gap-6">
                    {% for tour in tours %}
                        {% include 'index/tourism/tour/tour_card_item.html' %}
                    {% empty %}
                        <p class="text-gray-600 text-center mt-6">Kh√¥ng c√≥ tour n√†o ph√π h·ª£p.</p>
                    {% endfor %}
                </div>

                <!-- Ph√¢n trang -->
                {% if tours.has_other_pages %}
                    <div class="flex justify-center mt-12 gap-2">
                        {% with request.GET.timkiem as timkiem %}{% with request.GET.tinh as tinh %}{% with request.GET.thoigian as thoigian %}{% with request.GET.gia as gia %}
                            {% if tours.has_previous %}
                                <a href="?{% if timkiem %}timkiem={{ timkiem|urlencode }}&{% endif %}{% if tinh %}tinh={{ tinh|urlencode }}&{% endif %}{% if thoigian %}thoigian={{ thoigian|urlencode }}&{% endif %}{% if gia %}gia={{ gia|urlencode }}&{% endif %}page=1"
                                class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                                    ƒê·∫ßu
                                </a>
                                <a href="?{% if timkiem %}timkiem={{ timkiem|urlencode }}&{% endif %}{% if tinh %}tinh={{ tinh|urlencode }}&{% endif %}{% if thoigian %}thoigian={{ thoigian|urlencode }}&{% endif %}{% if gia %}gia={{ gia|urlencode }}&{% endif %}page={{ tours.previous_page_number }}"
                                class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                                    Tr∆∞·ªõc
                                </a>
                            {% endif %}

                            <span class="px-4 py-2 rounded-xl bg-emerald-50 text-emerald-700 font-semibold">
                                Trang {{ tours.number }}/{{ tours.paginator.num_pages }}
                            </span>

                            {% if tours.has_next %}
                                <a href="?{% if timkiem %}timkiem={{ timkiem|urlencode }}&{% endif %}{% if tinh %}tinh={{ tinh|urlencode }}&{% endif %}{% if thoigian %}thoigian={{ thoigian|urlencode }}&{% endif %}{% if gia %}gia={{ gia|urlencode }}&{% endif %}page={{ tours.next_page_number }}"
                                class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                                    Ti·∫øp theo
                                </a>
                                <a href="?{% if timkiem %}timkiem={{ timkiem|urlencode }}&{% endif %}{% if tinh %}tinh={{ tinh|urlencode }}&{% endif %}{% if thoigian %}thoigian={{ thoigian|urlencode }}&{% endif %}{% if gia %}gia={{ gia|urlencode }}&{% endif %}page={{ tours.paginator.num_pages }}"
                                class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                                    Cu·ªëi
                                </a>
                            {% endif %}
                        {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                    </div>
                {% endif %}

            </div>
        </div>
    </form>
</div>
{% endblock %}
