{% extends "index/index_layout.html" %}
{% load static %}

{% block title %}Danh sÃ¡ch tour du lá»‹ch{% endblock %}

{% block content %}
<section class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <div class="text-center mb-12">
    <h1 class="text-4xl font-extrabold text-emerald-700 tracking-tight">
      ğŸ§³ Tour Du Lá»‹ch
    </h1>
    <p class="mt-2 text-gray-600">
      CÃ¹ng khÃ¡m phÃ¡ nhá»¯ng hÃ nh trÃ¬nh du lá»‹ch háº¥p dáº«n, Ä‘á»™c Ä‘Ã¡o vÃ  Ä‘áº§y tráº£i nghiá»‡m trÃªn kháº¯p má»i miá»n Ä‘áº¥t nÆ°á»›c.
    </p>
  </div>

  <!-- Form tÃ¬m kiáº¿m vÃ  Danh sÃ¡ch tour -->
  <form method="GET" action="" class="grid grid-cols-1 lg:grid-cols-5 gap-6">
    
    <!-- Bá»™ lá»c -->
    <div class="col-span-1 lg:col-span-1 bg-white rounded-xl p-4 shadow border border-gray-100 space-y-4 h-fit">
      <h2 class="text-lg font-semibold text-green-700 mb-2">ğŸ” Bá»™ lá»c</h2>

      <input type="text" name="timkiem" placeholder="TÃ¬m tour..." value="{{ timkiem_chon }}" 
             class="border p-2 rounded-md w-full">

      <select name="tinh" class="w-full px-3 py-2 border rounded-md">
        <option value="">ğŸ“ Chá»n tá»‰nh</option>
        {% for tinh in tinhs %}
          <option value="{{ tinh }}" {% if tinh == tinh_chon %}selected{% endif %}>{{ tinh }}</option>
        {% endfor %}
      </select>

      <select name="thoigian" class="w-full px-3 py-2 border rounded-md">
        <option value="">â±ï¸ Chá»n thá»i gian</option>
        <option value="1" {% if thoigian_chon == '1' %}selected{% endif %}>1 ngÃ y</option>
        <option value="2-3" {% if thoigian_chon == '2-3' %}selected{% endif %}>2-3 ngÃ y</option>
        <option value="3+" {% if thoigian_chon == '3+' %}selected{% endif %}>3+ ngÃ y</option>
      </select>

      <select name="gia" class="w-full px-3 py-2 border rounded-md">
        <option value="">ğŸ’° Chá»n giÃ¡</option>
        <option value="duoi1" {% if giatour_chon == 'duoi1' %}selected{% endif %}>DÆ°á»›i 1 triá»‡u</option>
        <option value="1-3" {% if giatour_chon == '1-3' %}selected{% endif %}>1-3 triá»‡u</option>
        <option value="tren3" {% if giatour_chon == 'tren3' %}selected{% endif %}>TrÃªn 3 triá»‡u</option>
      </select>

      <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-md text-sm transition">
        ğŸ” TÃ¬m kiáº¿m
      </button>
    </div>

    <!-- Danh sÃ¡ch tour -->
    <div class="col-span-1 lg:col-span-4 space-y-4">
      <div class="grid grid-cols-1 gap-6">
        {% for tour in tours %}
          {% include 'index/tourism/tour/tour_card_item.html' %}
        {% empty %}
          <p class="text-gray-600 text-center mt-6">KhÃ´ng cÃ³ tour nÃ o phÃ¹ há»£p.</p>
        {% endfor %}
      </div>

      <!-- PhÃ¢n trang -->
      {% if tours.has_other_pages %}
        <div class="flex justify-center mt-12 gap-2">
          {% with request.GET.timkiem as timkiem %}{% with request.GET.tinh as tinh %}{% with request.GET.thoigian as thoigian %}{% with request.GET.gia as gia %}
            {% if tours.has_previous %}
              <a href="?page=1" class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                Äáº§u
              </a>
              <a href="?page={{ tours.previous_page_number }}" class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                TrÆ°á»›c
              </a>
            {% endif %}

            <span class="px-4 py-2 rounded-xl bg-emerald-50 text-emerald-700 font-semibold">
              Trang {{ tours.number }}/{{ tours.paginator.num_pages }}
            </span>

            {% if tours.has_next %}
              <a href="?page={{ tours.next_page_number }}" class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                Tiáº¿p theo
              </a>
              <a href="?page={{ tours.paginator.num_pages }}" class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-2">
                Cuá»‘i
              </a>
            {% endif %}
          {% endwith %}{% endwith %}{% endwith %}{% endwith %}
        </div>
      {% endif %}
    </div>
  </form>
</section>
{% endblock %}
