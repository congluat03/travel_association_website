{% extends "index/index_layout.html" %}
{% load static %}

{% block title %}Tin Tá»©c Viá»‡t Nam{% endblock %}

{% block content %}
<section class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

  <div class="max-w-3xl mx-auto text-center mb-12">
    <h1 class="text-4xl font-extrabold text-emerald-700 tracking-tight">
      ğŸ“° Cáº­p Nháº­t Tin Tá»©c Du Lá»‹ch Má»—i NgÃ y
    </h1>
    <p class="mt-4 text-lg text-gray-600">
      Cáº­p nháº­t liÃªn tá»¥c cÃ¡c tin tá»©c du lá»‹ch má»›i nháº¥t, Ä‘iá»ƒm Ä‘áº¿n háº¥p dáº«n vÃ  xu hÆ°á»›ng khÃ¡m phÃ¡ Ä‘ang Ä‘Æ°á»£c quan tÃ¢m.
    </p>
  </div>
  <!-- FORM TÃŒM KIáº¾M -->
  <form method="get" class="flex flex-col md:flex-row flex-wrap gap-4 mb-12">
    <!-- Tá»« khÃ³a -->
    <div class="flex-1 min-w-[250px]">
      <input type="text" name="q" placeholder="ğŸ” Nháº­p tá»« khÃ³a tÃ¬m kiáº¿m..." value="{{ query }}"
             class="w-full bg-white/50 backdrop-blur border border-gray-300 rounded-xl px-4 py-2 focus:ring-emerald-600 focus:outline-none">
    </div>
  
    <!-- Chá»§ Ä‘á» -->
    <div class="min-w-[200px]">
      <select name="tag"
              class="w-full bg-white/50 backdrop-blur border border-gray-300 rounded-xl px-3 py-2 focus:ring-emerald-600 focus:outline-none">
        <option value="">ğŸ“Œ Lá»c theo tag</option>
        {% for tag in tags %}
          <option value="{{ tag.MA_TAG }}" {% if tag.MA_TAG == selected_tag %}selected{% endif %}>
            {{ tag.TEN_TAG }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Ná»•i báº­t -->
    <div class="min-w-[200px]">
      <select name="only_highlight"
              class="w-full bg-white/50 backdrop-blur border border-gray-300 rounded-xl px-3 py-2 focus:ring-emerald-600 focus:outline-none">
        <option value="">Táº¥t cáº£</option>
        <option value="1" {% if only_highlight == '1' %}selected{% endif %}>ğŸ”¥ Chá»‰ tin ná»•i báº­t</option>
        <option value="0" {% if only_highlight == '0' %}selected{% endif %}>ğŸ“„ Tin bÃ¬nh thÆ°á»ng</option>
      </select>
    </div>
  
    <!-- Loáº¡i tin tá»©c -->
    <div class="min-w-[200px]">
      <select name="loai_tin_tuc"
              class="w-full bg-white/50 backdrop-blur border border-gray-300 rounded-xl px-3 py-2 focus:ring-emerald-600 focus:outline-none">
        <option value="">-- Chá»n Loáº¡i Tin Tá»©c --</option>
        {% for loai in loai_tin_tuc_list %}
          <option value="{{ loai.LOAI_TIN_TUC }}" {% if loai.LOAI_TIN_TUC == loai_tin_tuc %}selected{% endif %}>
            {{ loai.LOAI_TIN_TUC }}
          </option>
        {% endfor %}
      </select>
    </div>
  
    <!-- NÃºt tÃ¬m kiáº¿m -->
    <div>
      <button type="submit"
              class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-2 rounded-xl shadow">
        ğŸ”
      </button>
    </div>
  </form>
  

  <!-- DANH SÃCH TIN Tá»¨C -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
    {% for tin in page_obj|slice:":10" %}
      <div class="bg-white shadow-lg rounded-xl overflow-hidden hover:shadow-xl transition-all">
        {% include 'index/news/tintuc_card_item.html' %}
      </div>
    {% endfor %}
  </div>

  <!-- PHÃ‚N TRANG -->
  {% if page_obj.has_other_pages %}
  <div class="flex justify-center mt-12 gap-2">
    {% with request.GET.q as q %}{% with request.GET.tag as tag %}{% with request.GET.only_highlight as only_highlight %}
      <!-- NÃºt Äáº§u -->
      {% if page_obj.has_previous %}
        <a href="?{% if q %}q={{ q|urlencode }}&{% endif %}{% if tag %}tag={{ tag|urlencode }}&{% endif %}{% if only_highlight %}only_highlight={{ only_highlight|urlencode }}&{% endif %}page=1"
           class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 transition-all duration-300 flex items-center gap-2">
           Äáº§u
        </a>
        <!-- NÃºt TrÆ°á»›c -->
        <a href="?{% if q %}q={{ q|urlencode }}&{% endif %}{% if tag %}tag={{ tag|urlencode }}&{% endif %}{% if only_highlight %}only_highlight={{ only_highlight|urlencode }}&{% endif %}page={{ page_obj.previous_page_number }}"
           class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 transition-all duration-300 flex items-center gap-2">
           TrÆ°á»›c
        </a>
      {% endif %}

      <!-- Trang hiá»‡n táº¡i -->
      <span class="px-4 py-2 rounded-xl bg-emerald-50 text-emerald-700 font-semibold">
        Trang {{ page_obj.number }}/{{ page_obj.paginator.num_pages }}
      </span>

      <!-- NÃºt Tiáº¿p -->
      {% if page_obj.has_next %}
        <a href="?{% if q %}q={{ q|urlencode }}&{% endif %}{% if tag %}tag={{ tag|urlencode }}&{% endif %}{% if only_highlight %}only_highlight={{ only_highlight|urlencode }}&{% endif %}page={{ page_obj.next_page_number }}"
           class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 transition-all duration-300 flex items-center gap-2">
          Tiáº¿p theo
        </a>
        <!-- NÃºt Cuá»‘i -->
        <a href="?{% if q %}q={{ q|urlencode }}&{% endif %}{% if tag %}tag={{ tag|urlencode }}&{% endif %}{% if only_highlight %}only_highlight={{ only_highlight|urlencode }}&{% endif %}page={{ page_obj.paginator.num_pages }}"
           class="px-4 py-2 rounded-xl border bg-emerald-600 text-white hover:bg-emerald-700 transition-all duration-300 flex items-center gap-2">
          Cuá»‘i
        </a>
      {% endif %}
    {% endwith %}{% endwith %}{% endwith %}
  </div>
  {% endif %}
</section>
{% endblock %}
